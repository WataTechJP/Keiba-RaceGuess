<!-- prettier-ignore -->
{% extends "base.html" %}
{% load static %}
{% block title %}ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold text-blue-600 mb-2">
  <a href="{% url 'timeline' %}" class="transform transition-all duration-300 hover:-translate-y-2 hover:text-blue-700 inline-block">
    TimeLine
  </a>
</h1>
<h2 class="text-xl font-bold text-black mb-2">ã“ã“ã§ã¯ã€ã‚ãªãŸã‚„ãƒ•ãƒ¬ãƒ³ãƒ‰ã®äºˆæƒ³ãŒã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</h2>

<a href="{% url 'submit_prediction' %}" class="inline-block bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mb-4">
  ï¼‹ äºˆæƒ³ã‚’ä½œæˆ
</a> 

<form method="get" class="mb-4">
  <label for="race_id">ãƒ¬ãƒ¼ã‚¹ã§çµã‚Šè¾¼ã¿:</label>
  <select
    name="race_id"
    id="race_id"
    class="border border-gray-300 rounded px-2 py-1"
    onchange="this.form.submit()"
  >
    <option value="">ã™ã¹ã¦ã®ãƒ¬ãƒ¼ã‚¹</option>
    {% for race in races %}
    <option value="{{ race.id }}" {% if race.id == selected_race_id %}selected{% endif %}>
      {{ race.name }}
    </option>
    {% endfor %}
  </select>
</form>

{% if predictions %}
<ul class="space-y-4">
  {% for p in predictions %}
  <li class="border p-4 rounded shadow-sm bg-white">
  <div class="flex items-start space-x-6">
    {% if p.user.userprofile.profile_image %}
      <img
        src="{{ p.user.userprofile.profile_image.url }}?v={{ p.user.userprofile.updated_at|date:'U' }}"
        alt="{{ p.user.username }}ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ"
        class="w-12 h-12 object-cover rounded-full border border-gray-300 shadow"
        style="width: 48px; height: 48px;"
      />
    {% else %}
      <div>
        <img
          src="{% static 'images/user.png' %}"
          alt="ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ"
          class="w-12 h-12 object-cover rounded-full border border-gray-300 shadow"
          style="width: 48px; height: 48px;"
        />
      </div>
    {% endif %}

    <div class="flex-1 space-y-1">
      <div class="text-sm text-gray-500">{{ p.user.username }} ã®äºˆæƒ³</div>
      <div class="font-bold text-lg text-blue-700">{{ p.race.name }}</div>
      <div>ğŸ¥‡ {{ p.first_position.name }}</div>
      <div>ğŸ¥ˆ {{ p.second_position.name }}</div>
      <div>ğŸ¥‰ {{ p.third_position.name }}</div>
      <div class="text-sm text-gray-400">{{ p.created_at|date:"Yå¹´mæœˆdæ—¥ H:i" }}</div>
    </div>
  </div>
</li>
  {% endfor %}
</ul>
{% else %}
<p class="text-gray-500">ã¾ã äºˆæƒ³ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
{% endif %}

<a href="{% url 'user_list' %}" class="text-sm text-gray-500 mt-6 block">â† ãƒ•ãƒ¬ãƒ³ãƒ‰ä¸€è¦§ã¸</a>
{% endblock %}

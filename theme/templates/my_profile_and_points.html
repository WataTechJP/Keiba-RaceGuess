<!-- prettier-ignore -->
{% extends "base.html" %}
{% load static %}

{% block title %}ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã¨ãƒã‚¤ãƒ³ãƒˆ{% endblock %}

{% block content %}
<h2 class="text-2xl font-bold mb-4 text-blue-600">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h2>
<div
  class="bg-white shadow-md rounded p-6 max-w-md mx-auto space-y-4 text-center"
>
  {% if user.userprofile.profile_image %}
  <div
    class="w-32 h-32 mx-auto overflow-hidden rounded-full border border-gray-300 shadow-md"
  >
    <img
      src="{{ user.userprofile.profile_image.url }}?v={{ profile.updated_at|date:'U' }}"
      alt="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ"
      class="w-full h-full object-cover rounded-full"
    />
  </div>
  {% else %}
  <div
    class="w-32 h-32 mx-auto overflow-hidden rounded-full border border-gray-300 shadow-md"
  >
    <img
      src="{% static 'images/user.png' %}"
      alt="ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ"
      class="w-full h-full object-cover rounded-full"
    />
  </div>
  {% endif %}

  <p><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼š</strong> {{ user.username }}</p>
  <p><strong>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼š</strong> {{ user.email }}</p>
  <p><strong>ç™»éŒ²æ—¥ï¼š</strong> {{ user.date_joined|date:"Yå¹´mæœˆdæ—¥" }}</p>

  <form method="POST" enctype="multipart/form-data" class="space-y-2">
    {% csrf_token %} {{ form.as_p }}
    <button
      type="submit"
      class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
    >
      ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã‚’æ›´æ–°
    </button>
  </form>
</div>

<h1 class="text-2xl font-bold mb-4 mt-10">ğŸ† ã‚ãªãŸã®ç²å¾—ãƒã‚¤ãƒ³ãƒˆ</h1>

<p class="text-lg mb-4">
  ç¾åœ¨ã®ãƒã‚¤ãƒ³ãƒˆ: <strong>{{ user_point.points }}</strong> pt
</p>

<h2 class="text-xl font-semibold mt-6">ğŸ“‹ ãƒ¬ãƒ¼ã‚¹ã”ã¨ã®ç­”ãˆåˆã‚ã›çµæœ</h2>
<table class="table-auto w-full border">
  <thead>
    <tr class="bg-gray-100">
      <th class="px-4 py-2 border">ãƒ¬ãƒ¼ã‚¹å</th>
      <th class="px-4 py-2 border">ã‚ãªãŸã®äºˆæƒ³</th>
      <th class="px-4 py-2 border">çµæœ</th>
      <th class="px-4 py-2 border">ç²å¾—ãƒã‚¤ãƒ³ãƒˆ</th>
    </tr>
  </thead>
  <tbody>
    {% for result in evaluated_results %}
    <tr>
      <td class="border px-4 py-2">{{ result.race_name }}</td>
      <td class="border px-4 py-2">
        1ç€: {{ result.predicted_1 }}<br />
        2ç€: {{ result.predicted_2 }}<br />
        3ç€: {{ result.predicted_3 }}
      </td>
      <td class="border px-4 py-2">
        1ç€: {{ result.actual_1 }}<br />
        2ç€: {{ result.actual_2 }}<br />
        3ç€: {{ result.actual_3 }}
      </td>
      <td class="border px-4 py-2 text-center">{{ result.score }} pt</td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4" class="text-center py-4">
        ã¾ã çµæœãŒåæ˜ ã•ã‚ŒãŸäºˆæƒ³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}

<!-- prettier-ignore -->
{% extends 'base.html' %}
{% block title %}{{ group.name }}{% endblock %}

{% block content %}
<h1 class="text-xl font-bold mb-4">{{ group.name }}</h1>

<h2 class="text-lg font-semibold">ğŸ’¬ ãƒãƒ£ãƒƒãƒˆ</h2>
<ul class="border p-2 mb-4 max-h-48 overflow-y-scroll">
  {% for message in messages %}
  <li>
    <strong>{{ message.sender.username }}:</strong> {{ message.content }}
    <small class="text-gray-400">{{ message.timestamp }}</small>
  </li>
  {% endfor %}
</ul>

<form method="post">
  {% csrf_token %} {{ message_form.as_p }}
  <button
    type="submit"
    name="message_submit"
    class="bg-blue-500 text-white px-3 py-1 rounded"
  >
    é€ä¿¡
  </button>
</form>

<h2 class="text-lg font-semibold mt-6">ğŸ Myäºˆæƒ³</h2>
<ul class="mb-4">
  {% for p in predictions %}
  <li>
    <span class="inline-block">
      <li>
        <strong>{{ p.user.username }}</strong> <br />
        {{ p.race.name }}<br />
        1ç€ {{ p.first_position.name }}<br />
        2ç€ {{ p.second_position.name }}<br />
        3ç€ {{ p.third_position.name }}
      </li>
    </span>
    {% if request.user == p.user %}
    <a
      href="{% url 'delete_group_prediction' group.id p.id %}"
      class="text-red-500 text-sm ml-2"
      onclick="return confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');"
    >
      å‰Šé™¤
    </a>
    {% endif %}
  </li>
  {% empty %}
  <li>ã¾ã å…±æœ‰ã•ã‚ŒãŸäºˆæƒ³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
  {% endfor %}
</ul>

<h2 class="text-lg font-semibold mt-6">ğŸ“¤ äºˆæƒ³ã‚’ã‚°ãƒ«ãƒ¼ãƒ—ã«å…±æœ‰</h2>

<form method="post" class="mb-6">
  {% csrf_token %} {{ share_form.as_p }}
  <button
    type="submit"
    name="share_prediction"
    class="bg-green-600 text-black px-4 py-1 rounded"
  >
    ã“ã®äºˆæƒ³ã‚’ã‚°ãƒ«ãƒ¼ãƒ—ã«å…±æœ‰ã™ã‚‹
  </button>
</form>

<h3 class="text-lg font-bold">ğŸ“ ã‚°ãƒ«ãƒ¼ãƒ—å†…ã®äºˆæƒ³</h3>
<ul class="list-disc pl-5">
  {% for p in predictions %}
  <li>
    <strong>{{ p.user.username }}</strong> <br />
    {{ p.race.name }}<br />
    1ç€ {{ p.first_position.name }}<br />
    2ç€ {{ p.second_position.name }}<br />
    3ç€ {{ p.third_position.name }}
  </li>
  {% empty %}
  <li>ã¾ã å…±æœ‰ã•ã‚ŒãŸäºˆæƒ³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
  {% endfor %}
</ul>

<a href="{% url 'group_list' %}" class="text-sm text-blue-600 mt-6 inline-block"
  >â† ã‚°ãƒ«ãƒ¼ãƒ—ä¸€è¦§ã«æˆ»ã‚‹</a
>
{% endblock %}
